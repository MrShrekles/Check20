<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Character Sheet</title>
    <link rel="stylesheet" href="styles/charsheet.css">
    <link rel="icon" href="/assets/icons/favicon.png" type="image/png">
    <script src="scripts/char_class.js" defer></script>
    <script src="scripts/char_species.js" defer></script>
    <script src="scripts/charsheet.js" defer></script>
    <script src="scripts/char_save.js" defer></script>


</head>

<body>
    <button class="nav-button" onclick="location.href='index.html'">Homepage</button>
    <form id="character-sheet">
        <section class="two-column" id="charsheet">
            <div class="column">

                <div class="character-header">
                    <div class="character-header">
                        <label for="charName">Character Name:</label>
                        <input type="text" id="charName" name="charName">

                    </div>


                    <div class="health-section">

                        <h2>Health</h2>
                        <table class="health-table">
                            <thead>
                                <tr>
                                    <th>Attribute</th>
                                    <th>Total</th>
                                    <th>Current</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Armor</td>
                                    <td><input type="number" name="armorTotal" class="circle-input" id="armor"></td>
                                    <td><input type="number" name="armorCurrent" class="circle-input"></td>
                                </tr>
                                <tr>
                                    <td>Wounds</td>
                                    <td>
                                        <input type="number" name="woundsTotal" class="circle-input" id="wounds">
                                    </td>
                                    <td>
                                        <input type="number" name="woundsCurrent" class="circle-input" id="woundsCurrent">
                                    </td>
                                </tr>

                                <tr>
                                    <td>Movement Speed</td>
                                    <td>
                                        <input type="number" name="moveTotal" class="circle-input" id="movement">
                                    </td>
                                    <td>
                                        <input type="number" name="moveCurrent" class="circle-input" id="moveCurrent">
                                    </td>
                                </tr>

                                <tr>
                                    <td>Low Light Vision</td>
                                    <td>
                                        <input type="number" name="llvTotal" class="circle-input" id="llv">
                                    </td>
                                    <td>
                                        <input type="number" name="llvCurrent" class="circle-input" id="llvCurrent">
                                    </td>
                                </tr>

                                <!-- Single button to recalculate all derived stats -->
                                <tr class="online-only">
                                    <td colspan="3" class="centered">
                                        <button type="button" onclick="recalculateAllStats()">Recalculate Stats</button>
                                    </td>
                                </tr>

                            </tbody>
                        </table>
                    </div>

                </div>

                <h2>Checks</h2>
                <div class="checks-section">
                    <table class="checks-table">
                        <thead>
                            <tr>
                                <th>Physical Checks</th>
                                <th>Total</th>
                                <th>Bonus</th>
                                <th>Mental Checks</th>
                                <th>Total</th>
                                <th>Bonus</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Row 1 -->
                            <tr>
                                <td>Agility</td>
                                <td><input type="number" name="agilityTotal" class="circle-input" id="agilityTotal" onchange="calculateDerivedStats()"></td>
                                <td><input type="number" name="agilityBonus" class="circle-input"></td>
                                <td>Influence</td>
                                <td><input type="number" name="influenceTotal" class="circle-input"></td>
                                <td><input type="number" name="influenceBonus" class="circle-input"></td>
                            </tr>
                            <!-- Row 2 -->
                            <tr>
                                <td>Crafting</td>
                                <td><input type="number" name="craftingTotal" class="circle-input"></td>
                                <td><input type="number" name="craftingBonus" class="circle-input"></td>
                                <td>Intellect</td>
                                <td><input type="number" name="intellectTotal" class="circle-input"></td>
                                <td><input type="number" name="intellectBonus" class="circle-input"></td>
                            </tr>
                            <!-- Row 3 -->
                            <tr>
                                <td>Stealth</td>
                                <td><input type="number" name="stealthTotal" class="circle-input"></td>
                                <td><input type="number" name="stealthBonus" class="circle-input"></td>
                                <td>Luck</td>
                                <td><input type="number" name="luckTotal" class="circle-input"></td>
                                <td><input type="number" name="luckBonus" class="circle-input"></td>
                            </tr>
                            <!-- Row 4 -->
                            <tr>
                                <td>Strength</td>
                                <td><input type="number" name="strengthTotal" class="circle-input" id="strength" onchange="calculateDerivedStats()"></td>
                                <td><input type="number" name="strengthBonus" class="circle-input"></td>
                                <td>Observation</td>
                                <td><input type="number" name="observationTotal" class="circle-input" id="observation" onchange="calculateDerivedStats()"></td>
                                <td><input type="number" name="observationBonus" class="circle-input"></td>
                            </tr>
                            <!-- Row 5 -->
                            <tr>
                                <td>Survival</td>
                                <td><input type="number" name="survivalTotal" class="circle-input"></td>
                                <td><input type="number" name="survivalBonus" class="circle-input"></td>
                                <td>Spirit</td>
                                <td><input type="number" name="spiritTotal" class="circle-input"></td>
                                <td><input type="number" name="spiritBonus" class="circle-input"></td>
                            </tr>
                            <tr class="online-only">
                                <td colspan="3" class="total-sum-row">
                                    <button type="button" onclick="adjustAllTotals(1)">+1 to All</button>
                                    <button type="button" onclick="adjustAllTotals(-1)">-1 to All</button>
                                    <button type="button" onclick="clearAllTotals()">Clear All</button>
                                </td>
                                <td colspan="3">
                                    Total Checks: <input type="number" id="totalChecksSum" class="circle-input" readonly>
                                </td>
                            </tr>

                        </tbody>
                    </table>
                </div>

                <ul class="char-details-inline">
                    <li>
                        <label for="language">Language:</label>
                        <input type="text" id="language" name="language">
                    </li>
                    <li>
                        <label for="age">Age:</label>
                        <input type="number" id="age" name="age">
                    </li>
                    <li>
                        <label for="size">Size:</label>
                        <input type="text" id="size" name="size">
                    </li>
                    <li>
                        <label for="diet">Diet:</label>
                        <input type="text" id="diet" name="diet">
                    </li>
                </ul>

                <ul class="char-notes-inline">
                    <li>
                        <label for="trinket">Trinket:</label>
                        <textarea id="trinket" name="trinket"></textarea>
                    </li>
                    <li>
                        <label for="motivation">Motivation:</label>
                        <textarea id="motivation" name="motivation"></textarea>
                    </li>
                </ul>

                <h2>Resources</h2>
                <div class="resources-section">
                    <table class="resources-table">
                        <thead>
                            <tr>
                                <th>Resource</th>
                                <th>Total</th>
                                <th>Current</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- GP/Currency -->
                            <tr>
                                <td>GP/Currency</td>
                                <td colspan="2">
                                    <input type="number" id="gp" name="gp" class="circle-input" style="width: 100%;">
                                </td>
                            </tr>

                            <!-- Class Resource -->
                            <tr>
                                <td>Class Resource</td>
                                <td><input type="number" id="class-resource_max" name="class-resource_max" class="circle-input"></td>
                                <td><input type="number" id="class-resource" name="class-resource" class="circle-input">
                                </td>
                            </tr>

                            <!-- Spell Points -->
                            <tr>
                                <td>Spell Points</td>
                                <td><input type="number" id="spell-points_max" name="spell-points_max" class="circle-input"></td>
                                <td><input type="number" id="spell-points" name="spell-points" class="circle-input">
                                </td>
                            </tr>
                        </tbody>
                    </table>

                </div>
            </div>


            <div class="column">
                <!-- Species Selection -->
                <div class="flex-item">
                    <label for="species">Species:</label>
                    <select id="species" name="species">
                        <option value="">Select Species</option>
                    </select>

                    <select id="subspecies" name="subspecies" style="display: none;"></select>

                    <ul id="species-details" class="feature-list"></ul>
                    <div id="subspecies-details"></div>

                </div>

                <!-- Class Selection -->
                <div class="flex-item">
                    <label for="class">Class:</label>
                    <select name="class" id="class">
                        <option value="">Select Class</option>
                    </select>
                </div>

                <!-- Path, Talent, Specialization -->
                <div class="flex-container">
                    <div class="flex-item">
                        <label for="path">Path:</label>
                        <select name="path" id="path">
                            <option value="">Select Path</option>
                        </select>
                    </div>
                    <div class="flex-item">
                        <label for="talent">Talent:</label>
                        <select name="talent" id="talent">
                            <option value="">Select Talent</option>
                        </select>
                    </div>
                    <div class="flex-item specialization-wrapper hidden" id="specialization-wrapper">
                        <label for="special">Specialization:</label>
                        <select id="special" name="special">
                            <option value="">Select Specialization</option>
                        </select>
                    </div>
                </div>

                <!-- Details Outputs -->
                <div id="specialization-details" class="details-box"></div>
                <div id="char-details">
                    <div id="species-details"></div>
                    <div class="feature">
                        <div id="class-description" class="description-text"></div>
                        <ul id="class-features" class="feature-list"></ul>
                        <ul id="class-equipment" class="feature-list"></ul>
                        <div id="path-details" class="feature-list"></div>
                        <div id="talent-details" class="feature-list"></div>
                    </div>
                </div>
            </div>

        </section>

    </form>

</body>

</html>